{"ast":null,"code":"var _jsxFileName = \"/Users/fernandosalcedo/Desktop/Ironhack/academy-hacks/prog-lang-tutor-client/src/App.js\";\nimport './App.css';\nimport React from 'react';\nimport { Switch } from 'react-router-dom';\nimport NormalRoute from './routing-components/NormalRoute';\nimport { getLoggedIn, logout } from './services/auth';\nimport LoadingComponent from './components/Loading';\nimport Login from './components/Auth/Login';\nimport Signup from './components/Auth/Signup';\nimport Home from './components/Home/Home';\nimport Navbar from './components/Navbar/Navbar';\nimport ProtectedRoute from './routing-components/ProtectedRoute';\nimport TutorProfile from './components/Profile/TutorProfile';\nimport StudentProfile from './components/Profile/StudentProfile';\nimport TutorDetails from './components/TutorDetails/TutorDetails';\nimport ReviewTutor from './components/ReviewTutor/ReviewTutor';\nimport MyLessons from './components/MyLessons/MyLessons';\nimport TutorList from './components/TutorList/TutorList';\nimport Footer from './components/Footer/Footer';\nimport * as USER_HELPERS from './utils/userToken';\nimport * as PATHS from './utils/paths';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass App extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      user: null,\n      isLoading: true\n    };\n\n    this.componentDidMount = () => {\n      const accessToken = USER_HELPERS.getUserToken();\n\n      if (!accessToken) {\n        return this.setState({\n          isLoading: false\n        });\n      }\n\n      getLoggedIn(accessToken).then(res => {\n        if (!res.status) {\n          // deal with failed backend call\n          return this.setState({\n            isLoading: false\n          });\n        }\n\n        this.setState({\n          user: res.data.user,\n          isLoading: false\n        });\n      });\n    };\n\n    this.handleLogout = () => {\n      const accessToken = USER_HELPERS.getUserToken();\n      console.log('hit logout', accessToken);\n\n      if (!accessToken) {\n        return this.setState({\n          user: null,\n          isLoading: false\n        });\n      }\n\n      this.setState({\n        isLoading: true\n      }, () => {\n        logout(accessToken).then(res => {\n          if (!res.status) {\n            // deal with error here\n            console.error('ðŸ’¡ SOMETHING HAPPENED THAT HAS TO DEALT WITH', res);\n          }\n\n          USER_HELPERS.removeUserToken();\n          return this.setState({\n            isLoading: false,\n            user: null\n          });\n        });\n      });\n    };\n\n    this.authenticate = user => {\n      this.setState({\n        user\n      }, () => console.log('User', this.state.user));\n    };\n  }\n\n  render() {\n    var _this$state$user;\n\n    if (this.state.isLoading) {\n      return /*#__PURE__*/_jsxDEV(LoadingComponent, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 14\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [/*#__PURE__*/_jsxDEV(Navbar, {\n        handleLogout: this.handleLogout,\n        user: this.state.user\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Switch, {\n        children: [/*#__PURE__*/_jsxDEV(NormalRoute, {\n          exact: true,\n          path: PATHS.HOMEPAGE,\n          component: Home\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(NormalRoute, {\n          exact: true,\n          path: PATHS.SIGNUPPAGE,\n          authenticate: this.authenticate,\n          component: Signup\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(NormalRoute, {\n          exact: true,\n          path: PATHS.LOGINPAGE,\n          authenticate: this.authenticate,\n          component: Login\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(NormalRoute, {\n          exact: true,\n          path: PATHS.TUTOR_DETAILS,\n          authenticate: this.authenticate,\n          component: TutorDetails,\n          user: this.state.user\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(NormalRoute, {\n          exact: true,\n          path: PATHS.TUTOR_REVIEW,\n          authenticate: this.authenticate,\n          component: ReviewTutor\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(NormalRoute, {\n          exact: true,\n          path: PATHS.TUTOR_LIST,\n          component: TutorList,\n          user: this.state.user\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n          exact: true,\n          path: PATHS.USER_DETAILS,\n          component: ((_this$state$user = this.state.user) === null || _this$state$user === void 0 ? void 0 : _this$state$user.isTutor) ? TutorProfile : StudentProfile,\n          user: this.state.user\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/fernandosalcedo/Desktop/Ironhack/academy-hacks/prog-lang-tutor-client/src/App.js"],"names":["React","Switch","NormalRoute","getLoggedIn","logout","LoadingComponent","Login","Signup","Home","Navbar","ProtectedRoute","TutorProfile","StudentProfile","TutorDetails","ReviewTutor","MyLessons","TutorList","Footer","USER_HELPERS","PATHS","App","Component","state","user","isLoading","componentDidMount","accessToken","getUserToken","setState","then","res","status","data","handleLogout","console","log","error","removeUserToken","authenticate","render","HOMEPAGE","SIGNUPPAGE","LOGINPAGE","TUTOR_DETAILS","TUTOR_REVIEW","TUTOR_LIST","USER_DETAILS","isTutor"],"mappings":"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","sourcesContent":["import './App.css';\nimport React from 'react';\nimport { Switch } from 'react-router-dom';\nimport NormalRoute from './routing-components/NormalRoute';\nimport { getLoggedIn, logout } from './services/auth';\nimport LoadingComponent from './components/Loading';\nimport Login from './components/Auth/Login';\nimport Signup from './components/Auth/Signup';\nimport Home from './components/Home/Home';\nimport Navbar from './components/Navbar/Navbar';\nimport ProtectedRoute from './routing-components/ProtectedRoute';\nimport TutorProfile from './components/Profile/TutorProfile';\nimport StudentProfile from './components/Profile/StudentProfile';\nimport TutorDetails from './components/TutorDetails/TutorDetails';\nimport ReviewTutor from './components/ReviewTutor/ReviewTutor';\nimport MyLessons from './components/MyLessons/MyLessons';\nimport TutorList from './components/TutorList/TutorList';\nimport Footer from './components/Footer/Footer';\nimport * as USER_HELPERS from './utils/userToken';\nimport * as PATHS from './utils/paths';\n\nclass App extends React.Component {\n  state = {\n    user: null,\n    isLoading: true,\n  };\n\n  componentDidMount = () => {\n    const accessToken = USER_HELPERS.getUserToken();\n    if (!accessToken) {\n      return this.setState({\n        isLoading: false,\n      });\n    }\n    getLoggedIn(accessToken).then((res) => {\n      if (!res.status) {\n        // deal with failed backend call\n        return this.setState({\n          isLoading: false,\n        });\n      }\n      this.setState({\n        user: res.data.user,\n        isLoading: false,\n      });\n    });\n  };\n\n  handleLogout = () => {\n    const accessToken = USER_HELPERS.getUserToken();\n    console.log('hit logout', accessToken);\n    if (!accessToken) {\n      return this.setState({\n        user: null,\n        isLoading: false,\n      });\n    }\n    this.setState(\n      {\n        isLoading: true,\n      },\n      () => {\n        logout(accessToken).then((res) => {\n          if (!res.status) {\n            // deal with error here\n            console.error('ðŸ’¡ SOMETHING HAPPENED THAT HAS TO DEALT WITH', res);\n          }\n          USER_HELPERS.removeUserToken();\n          return this.setState({\n            isLoading: false,\n            user: null,\n          });\n        });\n      }\n    );\n  };\n\n  authenticate = (user) => {\n    this.setState(\n      {\n        user,\n      },\n      () => console.log('User', this.state.user)\n    );\n  };\n\n  render() {\n    if (this.state.isLoading) {\n      return <LoadingComponent />;\n    }\n\n    return (\n      <div className='App'>\n        <Navbar handleLogout={this.handleLogout} user={this.state.user} />\n        <Switch>\n          <NormalRoute exact path={PATHS.HOMEPAGE} component={Home} />\n          <NormalRoute\n            exact\n            path={PATHS.SIGNUPPAGE}\n            authenticate={this.authenticate}\n            component={Signup}\n          />\n          <NormalRoute\n            exact\n            path={PATHS.LOGINPAGE}\n            authenticate={this.authenticate}\n            component={Login}\n          />\n          <NormalRoute\n            exact\n            path={PATHS.TUTOR_DETAILS}\n            authenticate={this.authenticate}\n            component={TutorDetails}\n            user={this.state.user}\n          />\n          <NormalRoute\n            exact\n            path={PATHS.TUTOR_REVIEW}\n            authenticate={this.authenticate}\n            component={ReviewTutor}\n          />\n          <NormalRoute\n            exact\n            path={PATHS.TUTOR_LIST}\n            component={TutorList}\n            user={this.state.user}\n          />\n          <ProtectedRoute\n            exact\n            path={PATHS.USER_DETAILS}\n            component={this.state.user?.isTutor ? TutorProfile : StudentProfile}\n            user={this.state.user}\n          />\n        </Switch>\n        <Footer />\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}