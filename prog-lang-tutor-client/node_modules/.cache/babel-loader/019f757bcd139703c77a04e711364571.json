{"ast":null,"code":"var _jsxFileName = \"/Users/fernandosalcedo/Desktop/Ironhack/academy-hacks/prog-lang-tutor-client/src/components/MyLessons/MyLessons.jsx\";\nimport axios from 'axios';\nimport React, { Component } from 'react';\nimport './MyLessons.css';\nimport STUDENT_LESSON_SERVICE from '../../services/StudentLessonServices';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default class MyLessons extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {};\n\n    this.componentDidMount = () => {\n      this.getStudentWithLessons();\n    };\n\n    this.getStudentWithLessons = () => {\n      const studentId = this.props.match.params.id;\n      STUDENT_LESSON_SERVICE.getStudentAndLessons(studentId).then(responseFromApi => {\n        this.setState({\n          userAndTutorDetails: responseFromApi.data.studentWithBookings\n        }, () => {\n          console.log('state', this.state);\n        });\n      }).catch(err => console.log({\n        err: err\n      }));\n    };\n\n    this.getMyBookings = () => {\n      var _this$state$userAndTu;\n\n      let data = [];\n      console.log('long', this.state.userAndTutorDetails);\n      const details = (_this$state$userAndTu = this.state.userAndTutorDetails) === null || _this$state$userAndTu === void 0 ? void 0 : _this$state$userAndTu.myBookings;\n      details === null || details === void 0 ? void 0 : details.forEach(el => {\n        data.push({\n          date: el.date,\n          pickedSlots: el.pickedSlots.sort((a, b) => a - b),\n          tutorFullName: `${el.tutorId.firstName} ${el.tutorId.lastName}`,\n          studentBookingId: el._id,\n          tutorId: el.tutorId._id\n        });\n      });\n      console.log('data', data);\n      return data;\n    };\n\n    this.handleLessonDeletion = (studentBookingId, date, scheduledHour, studentId, tutorId) => {\n      console.log('my params', studentBookingId, date, scheduledHour, studentId, tutorId);\n      STUDENT_LESSON_SERVICE.cancelStudentBooking(studentBookingId, date, scheduledHour, studentId, tutorId).then(response => {\n        this.getStudentWithLessons();\n      });\n    };\n  }\n\n  render() {\n    var _this$getMyBookings;\n\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: (_this$getMyBookings = this.getMyBookings()) === null || _this$getMyBookings === void 0 ? void 0 : _this$getMyBookings.map(el => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: el.tutorFullName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: el.date\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: el.pickedSlots.map((scheduledHour, i) => /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [scheduledHour, \":00\", ' ', /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => this.handleLessonDeletion(el.studentBookingId, el.date, scheduledHour, this.state.userAndTutorDetails._id, el.tutorId),\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 19\n            }, this)]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 13\n        }, this)]\n      }, el.studentBookingId, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }, this))\n    }, void 0, false);\n  }\n\n}","map":{"version":3,"sources":["/Users/fernandosalcedo/Desktop/Ironhack/academy-hacks/prog-lang-tutor-client/src/components/MyLessons/MyLessons.jsx"],"names":["axios","React","Component","STUDENT_LESSON_SERVICE","MyLessons","state","componentDidMount","getStudentWithLessons","studentId","props","match","params","id","getStudentAndLessons","then","responseFromApi","setState","userAndTutorDetails","data","studentWithBookings","console","log","catch","err","getMyBookings","details","myBookings","forEach","el","push","date","pickedSlots","sort","a","b","tutorFullName","tutorId","firstName","lastName","studentBookingId","_id","handleLessonDeletion","scheduledHour","cancelStudentBooking","response","render","map","i"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport React, { Component } from 'react';\nimport './MyLessons.css';\nimport STUDENT_LESSON_SERVICE from '../../services/StudentLessonServices';\n\nexport default class MyLessons extends Component {\n  state = {};\n\n  componentDidMount = () => {\n    this.getStudentWithLessons();\n  };\n\n  getStudentWithLessons = () => {\n    const studentId = this.props.match.params.id;\n    STUDENT_LESSON_SERVICE.getStudentAndLessons(studentId)\n      .then((responseFromApi) => {\n        this.setState(\n          { userAndTutorDetails: responseFromApi.data.studentWithBookings },\n          () => {\n            console.log('state', this.state);\n          }\n        );\n      })\n      .catch((err) => console.log({ err: err }));\n  };\n\n  getMyBookings = () => {\n    let data = [];\n    console.log('long', this.state.userAndTutorDetails);\n    const details = this.state.userAndTutorDetails?.myBookings;\n\n    details?.forEach((el) => {\n      data.push({\n        date: el.date,\n        pickedSlots: el.pickedSlots.sort((a, b) => a - b),\n        tutorFullName: `${el.tutorId.firstName} ${el.tutorId.lastName}`,\n        studentBookingId: el._id,\n        tutorId: el.tutorId._id,\n      });\n    });\n    console.log('data', data);\n    return data;\n  };\n\n  handleLessonDeletion = (\n    studentBookingId,\n    date,\n    scheduledHour,\n    studentId,\n    tutorId\n  ) => {\n    console.log(\n      'my params',\n      studentBookingId,\n      date,\n      scheduledHour,\n      studentId,\n      tutorId\n    );\n    STUDENT_LESSON_SERVICE.cancelStudentBooking(\n      studentBookingId,\n      date,\n      scheduledHour,\n      studentId,\n      tutorId\n    ).then((response) => {\n      this.getStudentWithLessons();\n    });\n  };\n\n  render() {\n    return (\n      <>\n        {this.getMyBookings()?.map((el) => (\n          <div key={el.studentBookingId}>\n            <p>{el.tutorFullName}</p>\n            <p>{el.date}</p>\n            <ul>\n              {el.pickedSlots.map((scheduledHour, i) => (\n                <li key={i}>\n                  {scheduledHour}:00{' '}\n                  <button\n                    onClick={() =>\n                      this.handleLessonDeletion(\n                        el.studentBookingId,\n                        el.date,\n                        scheduledHour,\n                        this.state.userAndTutorDetails._id,\n                        el.tutorId\n                      )\n                    }\n                  >\n                    Cancel\n                  </button>\n                </li>\n              ))}\n            </ul>\n          </div>\n        ))}\n      </>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}