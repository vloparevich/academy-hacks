{"ast":null,"code":"var _jsxFileName = \"/Users/fernandosalcedo/Desktop/Ironhack/academy-hacks/prog-lang-tutor-client/src/components/Profile/StudentProfile.jsx\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport './Profile.css';\nimport PROFILE_SERVICE from '../../services/ProfileServices';\nimport * as PATHS from '../../utils/paths.js';\nimport CountryFlag from '../CountryFlag/CountryFlag';\nimport MyLessons from '../MyLessons/MyLessons';\nimport USER_SERVICE from '../../services/UserServices.js';\nimport Modal from '../Modal/Modal';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass StudentProfile extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      firstName: '',\n      lastName: '',\n      profilePic: '',\n      countryOfOrigin: '',\n      teachingExperience: '',\n      timeRangeOfAvailability: '',\n      coursesTaught: '',\n      isEditProfileClicked: false,\n      isEditDetailsClicked: false,\n      isShowMyBookingsClicked: false,\n      prevCourseName: '',\n      show: false\n    };\n\n    this.showModal = e => {\n      this.setState({\n        show: !this.state.show\n      });\n    };\n\n    this.getUser = () => {\n      USER_SERVICE.getSpecificStudent(this.state.user._id).then(res => {\n        this.setState({\n          firstName: res.user.firstName,\n          lastName: res.user.lastName,\n          countryOfOrigin: res.user.countryOfOrigin,\n          profilePic: res.user.profilePic,\n          aboutMe: res.user.aboutMe\n        });\n      });\n    };\n\n    this.handleDeleteButton = () => {\n      USER_SERVICE.deleteStudent(this.state.user._id).then(responseFromApi => {\n        console.log('Student after deletion', responseFromApi);\n        this.props.history.push(PATHS.HOMEPAGE);\n      });\n      this.props.handleLogout();\n    };\n\n    this.getUserWithUpdatedProfilePicture = event => {\n      const file = event.target.files[0];\n      const uploadData = new FormData();\n      uploadData.append('profilePic', file);\n      PROFILE_SERVICE.handleUpload(uploadData, this.state.user._id).then(responseFromApi => {\n        this.setState({\n          profilePic: responseFromApi.user\n        }, () => {\n          this.getUser();\n        });\n      });\n    };\n\n    this.handleRange = event => {\n      const {\n        name,\n        value\n      } = event.target;\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.handleEditButton = () => {\n      this.setState({\n        isEditDetailsClicked: !this.state.isEditDetailsClicked\n      });\n    };\n\n    this.handleShowBookingsButton = () => {\n      this.setState({\n        isShowMyBookingsClicked: !this.state.isShowMyBookingsClicked\n      });\n    };\n\n    this.handleEditProfileButton = () => {\n      this.setState({\n        isEditProfileClicked: !this.state.isEditProfileClicked\n      });\n\n      if (this.state.isEditProfileClicked) {\n        this.handleCancelOfUpdate();\n      }\n    };\n\n    this.handleFormInput = event => {\n      const {\n        name,\n        value\n      } = event.target;\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.handleSavingChanges = event => {\n      event.preventDefault();\n      PROFILE_SERVICE.handleUpdateStudentDetails(this.state).then(() => {\n        this.setState({\n          isEditDetailsClicked: false\n        }, () => {\n          this.getUser();\n        });\n      });\n    };\n\n    this.handleCancelOfUpdate = () => {\n      this.setState({\n        isEditDetailsClicked: false\n      }, () => this.getUser());\n    };\n  }\n\n  componentDidMount() {\n    console.log('from the props in cdid mount', this.props.user._id);\n    this.setState({\n      user: this.props.user\n    }, () => {\n      console.log('from state', this.state);\n      this.getUser();\n    });\n  }\n\n  render() {\n    var _this$state$user;\n\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"profileContainer\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"imageSection\",\n            children: [this.state.profilePic && /*#__PURE__*/_jsxDEV(\"img\", {\n              id: \"profilePicture\",\n              src: this.state.profilePic,\n              alt: \"profile pic\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 17\n            }, this), this.state.isEditProfileClicked && /*#__PURE__*/_jsxDEV(\"label\", {\n              id: \"imageInputLabel\",\n              children: [\"Add/Update profile picture\", /*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"imageInput\",\n                type: \"file\",\n                name: \"profilePic\",\n                onChange: event => this.getUserWithUpdatedProfilePicture(event),\n                ref: ref => this.fileInput = ref\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 151,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"userDetailsSection\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"controlButtonsUserDetails\",\n              children: [this.state.isEditDetailsClicked ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"form\", {\n                  onSubmit: event => this.handleSavingChanges(event),\n                  autoComplete: \"off\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      children: \"First name\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 172,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      autoFocus: true,\n                      name: \"firstName\",\n                      id: \"firstName\",\n                      value: this.state.firstName,\n                      onChange: this.handleFormInput\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 173,\n                      columnNumber: 25\n                    }, this), !this.state.firstName && /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"requiredField\",\n                      children: \"This field is required\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 181,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 171,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      children: \"Last name\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 187,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      name: \"lastName\",\n                      id: \"lastName\",\n                      value: this.state.lastName,\n                      onChange: this.handleFormInput\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 188,\n                      columnNumber: 25\n                    }, this), !this.state.lastName && /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"requiredField\",\n                      children: \"This field is required\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 195,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 186,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      children: \"Country\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 201,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      name: \"countryOfOrigin\",\n                      id: \"country\",\n                      value: this.state.countryOfOrigin,\n                      onChange: this.handleFormInput\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 202,\n                      columnNumber: 25\n                    }, this), !this.state.countryOfOrigin && /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"requiredField\",\n                      children: \"This field is required\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 209,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 200,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      children: \"About myself (max 1000 characters)\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 215,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                      maxLength: \"1000\",\n                      name: \"aboutMe\",\n                      id: \"description\",\n                      value: this.state.aboutMe,\n                      onChange: this.handleFormInput\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 216,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 214,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    disabled: this.state.error,\n                    className: \"formControlButtons\",\n                    children: \"Save\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 224,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 167,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  id: \"cancelChangesButton\",\n                  onClick: this.handleCancelOfUpdate,\n                  className: \"formControlButtons\",\n                  children: \"Cancel\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 231,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"plainUserDetails\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                    children: [this.state.firstName, \" \", this.state.lastName, ' ', /*#__PURE__*/_jsxDEV(CountryFlag, {\n                      countryOfOrigin: this.state.countryOfOrigin\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 244,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 242,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 241,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: this.state.aboutMe\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 250,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 249,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 240,\n                columnNumber: 19\n              }, this), this.state.isEditProfileClicked && !this.state.isEditDetailsClicked && /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  id: \"editMyDetailsButton\",\n                  onClick: this.handleEditButton,\n                  children: \"Edit my details\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 257,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  id: \"deleteProfileButton\",\n                  onClick: this.showModal,\n                  children: \"Delete profile\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 263,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Modal, {\n                  onClose: this.showModal,\n                  show: this.state.show,\n                  onConfirm: this.handleDeleteButton,\n                  children: \"Are you sure you want to delete your profile?\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 266,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            style: {\n              backgroundColor: this.state.isEditProfileClicked && '#F47174',\n              color: this.state.isEditProfileClicked && '#fff'\n            },\n            id: \"editMyProfileButton\",\n            onClick: this.handleEditProfileButton,\n            children: this.state.isEditProfileClicked ? 'Hide control buttons' : 'Edit my profile'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"myClassesSection\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            id: \"showMyBookingsButton\",\n            onClick: this.handleShowBookingsButton,\n            children: this.state.isShowMyBookingsClicked ? 'Hide my bookings' : 'Show my bookings'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 13\n          }, this), ((_this$state$user = this.state.user) === null || _this$state$user === void 0 ? void 0 : _this$state$user._id) && this.state.isShowMyBookingsClicked && /*#__PURE__*/_jsxDEV(MyLessons, {\n            studentId: this.state.user._id\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 300,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 9\n      }, this)\n    }, void 0, false);\n  }\n\n}\n\nexport default StudentProfile;","map":{"version":3,"sources":["/Users/fernandosalcedo/Desktop/Ironhack/academy-hacks/prog-lang-tutor-client/src/components/Profile/StudentProfile.jsx"],"names":["React","Component","Link","axios","PROFILE_SERVICE","PATHS","CountryFlag","MyLessons","USER_SERVICE","Modal","StudentProfile","state","firstName","lastName","profilePic","countryOfOrigin","teachingExperience","timeRangeOfAvailability","coursesTaught","isEditProfileClicked","isEditDetailsClicked","isShowMyBookingsClicked","prevCourseName","show","showModal","e","setState","getUser","getSpecificStudent","user","_id","then","res","aboutMe","handleDeleteButton","deleteStudent","responseFromApi","console","log","props","history","push","HOMEPAGE","handleLogout","getUserWithUpdatedProfilePicture","event","file","target","files","uploadData","FormData","append","handleUpload","handleRange","name","value","handleEditButton","handleShowBookingsButton","handleEditProfileButton","handleCancelOfUpdate","handleFormInput","handleSavingChanges","preventDefault","handleUpdateStudentDetails","componentDidMount","render","ref","fileInput","error","backgroundColor","color"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAO,eAAP;AACA,OAAOC,eAAP,MAA4B,gCAA5B;AACA,OAAO,KAAKC,KAAZ,MAAuB,sBAAvB;AACA,OAAOC,WAAP,MAAwB,4BAAxB;AACA,OAAOC,SAAP,MAAsB,wBAAtB;AACA,OAAOC,YAAP,MAAyB,gCAAzB;AACA,OAAOC,KAAP,MAAkB,gBAAlB;;;;AAEA,MAAMC,cAAN,SAA6BT,SAA7B,CAAuC;AAAA;AAAA;AAAA,SACrCU,KADqC,GAC7B;AACNC,MAAAA,SAAS,EAAE,EADL;AAENC,MAAAA,QAAQ,EAAE,EAFJ;AAGNC,MAAAA,UAAU,EAAE,EAHN;AAINC,MAAAA,eAAe,EAAE,EAJX;AAKNC,MAAAA,kBAAkB,EAAE,EALd;AAMNC,MAAAA,uBAAuB,EAAE,EANnB;AAONC,MAAAA,aAAa,EAAE,EAPT;AAQNC,MAAAA,oBAAoB,EAAE,KARhB;AASNC,MAAAA,oBAAoB,EAAE,KAThB;AAUNC,MAAAA,uBAAuB,EAAE,KAVnB;AAWNC,MAAAA,cAAc,EAAE,EAXV;AAYNC,MAAAA,IAAI,EAAE;AAZA,KAD6B;;AAAA,SAgBrCC,SAhBqC,GAgBxBC,CAAD,IAAO;AACjB,WAAKC,QAAL,CAAc;AACZH,QAAAA,IAAI,EAAE,CAAC,KAAKZ,KAAL,CAAWY;AADN,OAAd;AAGD,KApBoC;;AAAA,SAmCrCI,OAnCqC,GAmC3B,MAAM;AACdnB,MAAAA,YAAY,CAACoB,kBAAb,CAAgC,KAAKjB,KAAL,CAAWkB,IAAX,CAAgBC,GAAhD,EAAqDC,IAArD,CAA2DC,GAAD,IAAS;AACjE,aAAKN,QAAL,CAAc;AACZd,UAAAA,SAAS,EAAEoB,GAAG,CAACH,IAAJ,CAASjB,SADR;AAEZC,UAAAA,QAAQ,EAAEmB,GAAG,CAACH,IAAJ,CAAShB,QAFP;AAGZE,UAAAA,eAAe,EAAEiB,GAAG,CAACH,IAAJ,CAASd,eAHd;AAIZD,UAAAA,UAAU,EAAEkB,GAAG,CAACH,IAAJ,CAASf,UAJT;AAKZmB,UAAAA,OAAO,EAAED,GAAG,CAACH,IAAJ,CAASI;AALN,SAAd;AAOD,OARD;AASD,KA7CoC;;AAAA,SA+CrCC,kBA/CqC,GA+ChB,MAAM;AACzB1B,MAAAA,YAAY,CAAC2B,aAAb,CAA2B,KAAKxB,KAAL,CAAWkB,IAAX,CAAgBC,GAA3C,EAAgDC,IAAhD,CAAsDK,eAAD,IAAqB;AACxEC,QAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ,EAAsCF,eAAtC;AACA,aAAKG,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwBpC,KAAK,CAACqC,QAA9B;AACD,OAHD;AAIA,WAAKH,KAAL,CAAWI,YAAX;AACD,KArDoC;;AAAA,SAuDrCC,gCAvDqC,GAuDDC,KAAD,IAAW;AAC5C,YAAMC,IAAI,GAAGD,KAAK,CAACE,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAAb;AACA,YAAMC,UAAU,GAAG,IAAIC,QAAJ,EAAnB;AACAD,MAAAA,UAAU,CAACE,MAAX,CAAkB,YAAlB,EAAgCL,IAAhC;AACA1C,MAAAA,eAAe,CAACgD,YAAhB,CAA6BH,UAA7B,EAAyC,KAAKtC,KAAL,CAAWkB,IAAX,CAAgBC,GAAzD,EAA8DC,IAA9D,CACGK,eAAD,IAAqB;AACnB,aAAKV,QAAL,CACE;AACEZ,UAAAA,UAAU,EAAEsB,eAAe,CAACP;AAD9B,SADF,EAIE,MAAM;AACJ,eAAKF,OAAL;AACD,SANH;AAQD,OAVH;AAYD,KAvEoC;;AAAA,SAyErC0B,WAzEqC,GAyEtBR,KAAD,IAAW;AACvB,YAAM;AAAES,QAAAA,IAAF;AAAQC,QAAAA;AAAR,UAAkBV,KAAK,CAACE,MAA9B;AACA,WAAKrB,QAAL,CAAc;AAAE,SAAC4B,IAAD,GAAQC;AAAV,OAAd;AACD,KA5EoC;;AAAA,SA8ErCC,gBA9EqC,GA8ElB,MAAM;AACvB,WAAK9B,QAAL,CAAc;AAAEN,QAAAA,oBAAoB,EAAE,CAAC,KAAKT,KAAL,CAAWS;AAApC,OAAd;AACD,KAhFoC;;AAAA,SAkFrCqC,wBAlFqC,GAkFV,MAAM;AAC/B,WAAK/B,QAAL,CAAc;AACZL,QAAAA,uBAAuB,EAAE,CAAC,KAAKV,KAAL,CAAWU;AADzB,OAAd;AAGD,KAtFoC;;AAAA,SAwFrCqC,uBAxFqC,GAwFX,MAAM;AAC9B,WAAKhC,QAAL,CAAc;AAAEP,QAAAA,oBAAoB,EAAE,CAAC,KAAKR,KAAL,CAAWQ;AAApC,OAAd;;AACA,UAAI,KAAKR,KAAL,CAAWQ,oBAAf,EAAqC;AACnC,aAAKwC,oBAAL;AACD;AACF,KA7FoC;;AAAA,SA+FrCC,eA/FqC,GA+FlBf,KAAD,IAAW;AAC3B,YAAM;AAAES,QAAAA,IAAF;AAAQC,QAAAA;AAAR,UAAkBV,KAAK,CAACE,MAA9B;AACA,WAAKrB,QAAL,CAAc;AAAE,SAAC4B,IAAD,GAAQC;AAAV,OAAd;AACD,KAlGoC;;AAAA,SAoGrCM,mBApGqC,GAoGdhB,KAAD,IAAW;AAC/BA,MAAAA,KAAK,CAACiB,cAAN;AACA1D,MAAAA,eAAe,CAAC2D,0BAAhB,CAA2C,KAAKpD,KAAhD,EAAuDoB,IAAvD,CAA4D,MAAM;AAChE,aAAKL,QAAL,CACE;AACEN,UAAAA,oBAAoB,EAAE;AADxB,SADF,EAIE,MAAM;AACJ,eAAKO,OAAL;AACD,SANH;AAQD,OATD;AAUD,KAhHoC;;AAAA,SAkHrCgC,oBAlHqC,GAkHd,MAAM;AAC3B,WAAKjC,QAAL,CACE;AACEN,QAAAA,oBAAoB,EAAE;AADxB,OADF,EAIE,MAAM,KAAKO,OAAL,EAJR;AAMD,KAzHoC;AAAA;;AAsBrCqC,EAAAA,iBAAiB,GAAG;AAClB3B,IAAAA,OAAO,CAACC,GAAR,CAAY,8BAAZ,EAA4C,KAAKC,KAAL,CAAWV,IAAX,CAAgBC,GAA5D;AACA,SAAKJ,QAAL,CACE;AACEG,MAAAA,IAAI,EAAE,KAAKU,KAAL,CAAWV;AADnB,KADF,EAIE,MAAM;AACJQ,MAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0B,KAAK3B,KAA/B;AACA,WAAKgB,OAAL;AACD,KAPH;AASD;;AA0FDsC,EAAAA,MAAM,GAAG;AAAA;;AACP,wBACE;AAAA,6BACE;AAAA,gCACE;AAAK,UAAA,SAAS,EAAC,kBAAf;AAAA,kCACE;AAAK,YAAA,SAAS,EAAC,cAAf;AAAA,uBACG,KAAKtD,KAAL,CAAWG,UAAX,iBACC;AACE,cAAA,EAAE,EAAC,gBADL;AAEE,cAAA,GAAG,EAAE,KAAKH,KAAL,CAAWG,UAFlB;AAGE,cAAA,GAAG,EAAC;AAHN;AAAA;AAAA;AAAA;AAAA,oBAFJ,EAQG,KAAKH,KAAL,CAAWQ,oBAAX,iBACC;AAAO,cAAA,EAAE,EAAC,iBAAV;AAAA,oEAEE;AACE,gBAAA,EAAE,EAAC,YADL;AAEE,gBAAA,IAAI,EAAC,MAFP;AAGE,gBAAA,IAAI,EAAC,YAHP;AAIE,gBAAA,QAAQ,EAAG0B,KAAD,IACR,KAAKD,gCAAL,CAAsCC,KAAtC,CALJ;AAOE,gBAAA,GAAG,EAAGqB,GAAD,IAAU,KAAKC,SAAL,GAAiBD;AAPlC;AAAA;AAAA;AAAA;AAAA,sBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,oBATJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAwBE;AAAK,YAAA,SAAS,EAAC,oBAAf;AAAA,mCACE;AAAK,cAAA,SAAS,EAAC,2BAAf;AAAA,yBACG,KAAKvD,KAAL,CAAWS,oBAAX,gBACC;AAAA,wCACE;AACE,kBAAA,QAAQ,EAAGyB,KAAD,IAAW,KAAKgB,mBAAL,CAAyBhB,KAAzB,CADvB;AAEE,kBAAA,YAAY,EAAC,KAFf;AAAA,0CAIE;AAAA,4CACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BADF,eAEE;AACE,sBAAA,SAAS,MADX;AAEE,sBAAA,IAAI,EAAC,WAFP;AAGE,sBAAA,EAAE,EAAC,WAHL;AAIE,sBAAA,KAAK,EAAE,KAAKlC,KAAL,CAAWC,SAJpB;AAKE,sBAAA,QAAQ,EAAE,KAAKgD;AALjB;AAAA;AAAA;AAAA;AAAA,4BAFF,EASG,CAAC,KAAKjD,KAAL,CAAWC,SAAZ,iBACC;AAAM,sBAAA,SAAS,EAAC,eAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAVJ;AAAA;AAAA;AAAA;AAAA;AAAA,0BAJF,eAmBE;AAAA,4CACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BADF,eAEE;AACE,sBAAA,IAAI,EAAC,UADP;AAEE,sBAAA,EAAE,EAAC,UAFL;AAGE,sBAAA,KAAK,EAAE,KAAKD,KAAL,CAAWE,QAHpB;AAIE,sBAAA,QAAQ,EAAE,KAAK+C;AAJjB;AAAA;AAAA;AAAA;AAAA,4BAFF,EAQG,CAAC,KAAKjD,KAAL,CAAWE,QAAZ,iBACC;AAAM,sBAAA,SAAS,EAAC,eAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BATJ;AAAA;AAAA;AAAA;AAAA;AAAA,0BAnBF,eAiCE;AAAA,4CACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BADF,eAEE;AACE,sBAAA,IAAI,EAAC,iBADP;AAEE,sBAAA,EAAE,EAAC,SAFL;AAGE,sBAAA,KAAK,EAAE,KAAKF,KAAL,CAAWI,eAHpB;AAIE,sBAAA,QAAQ,EAAE,KAAK6C;AAJjB;AAAA;AAAA;AAAA;AAAA,4BAFF,EAQG,CAAC,KAAKjD,KAAL,CAAWI,eAAZ,iBACC;AAAM,sBAAA,SAAS,EAAC,eAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BATJ;AAAA;AAAA;AAAA;AAAA;AAAA,0BAjCF,eA+CE;AAAA,4CACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BADF,eAEE;AACE,sBAAA,SAAS,EAAC,MADZ;AAEE,sBAAA,IAAI,EAAC,SAFP;AAGE,sBAAA,EAAE,EAAC,aAHL;AAIE,sBAAA,KAAK,EAAE,KAAKJ,KAAL,CAAWsB,OAJpB;AAKE,sBAAA,QAAQ,EAAE,KAAK2B;AALjB;AAAA;AAAA;AAAA;AAAA,4BAFF;AAAA;AAAA;AAAA;AAAA;AAAA,0BA/CF,eAyDE;AACE,oBAAA,QAAQ,EAAE,KAAKjD,KAAL,CAAWyD,KADvB;AAEE,oBAAA,SAAS,EAAC,oBAFZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAzDF;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,eAiEE;AACE,kBAAA,EAAE,EAAC,qBADL;AAEE,kBAAA,OAAO,EAAE,KAAKT,oBAFhB;AAGE,kBAAA,SAAS,EAAC,oBAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAjEF;AAAA,8BADD,gBA2EC;AAAK,gBAAA,SAAS,EAAC,kBAAf;AAAA,wCACE;AAAA,yCACE;AAAA,+BACG,KAAKhD,KAAL,CAAWC,SADd,OAC0B,KAAKD,KAAL,CAAWE,QADrC,EAC+C,GAD/C,eAEE,QAAC,WAAD;AACE,sBAAA,eAAe,EAAE,KAAKF,KAAL,CAAWI;AAD9B;AAAA;AAAA;AAAA;AAAA,4BAFF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,wBADF,eASE;AAAA,yCACE;AAAA,8BAAI,KAAKJ,KAAL,CAAWsB;AAAf;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,wBATF;AAAA;AAAA;AAAA;AAAA;AAAA,sBA5EJ,EA0FG,KAAKtB,KAAL,CAAWQ,oBAAX,IACC,CAAC,KAAKR,KAAL,CAAWS,oBADb,iBAEG;AAAA,wCACE;AACE,kBAAA,EAAE,EAAC,qBADL;AAEE,kBAAA,OAAO,EAAE,KAAKoC,gBAFhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,eAOE;AAAQ,kBAAA,EAAE,EAAC,qBAAX;AAAiC,kBAAA,OAAO,EAAE,KAAKhC,SAA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAPF,eAUE,QAAC,KAAD;AACE,kBAAA,OAAO,EAAE,KAAKA,SADhB;AAEE,kBAAA,IAAI,EAAE,KAAKb,KAAL,CAAWY,IAFnB;AAGE,kBAAA,SAAS,EAAE,KAAKW,kBAHlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAVF;AAAA,8BA5FN;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBAxBF,eA0IE;AACE,YAAA,KAAK,EAAE;AACLmC,cAAAA,eAAe,EAAE,KAAK1D,KAAL,CAAWQ,oBAAX,IAAmC,SAD/C;AAELmD,cAAAA,KAAK,EAAE,KAAK3D,KAAL,CAAWQ,oBAAX,IAAmC;AAFrC,aADT;AAKE,YAAA,EAAE,EAAC,qBALL;AAME,YAAA,OAAO,EAAE,KAAKuC,uBANhB;AAAA,sBAQG,KAAK/C,KAAL,CAAWQ,oBAAX,GACG,sBADH,GAEG;AAVN;AAAA;AAAA;AAAA;AAAA,kBA1IF;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAwJE;AAAK,UAAA,EAAE,EAAC,kBAAR;AAAA,kCACE;AACE,YAAA,EAAE,EAAC,sBADL;AAEE,YAAA,OAAO,EAAE,KAAKsC,wBAFhB;AAAA,sBAIG,KAAK9C,KAAL,CAAWU,uBAAX,GACG,kBADH,GAEG;AANN;AAAA;AAAA;AAAA;AAAA,kBADF,EASG,0BAAKV,KAAL,CAAWkB,IAAX,sEAAiBC,GAAjB,KAAwB,KAAKnB,KAAL,CAAWU,uBAAnC,iBACC,QAAC,SAAD;AAAW,YAAA,SAAS,EAAE,KAAKV,KAAL,CAAWkB,IAAX,CAAgBC;AAAtC;AAAA;AAAA;AAAA;AAAA,kBAVJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBAxJF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF,qBADF;AA0KD;;AAtSoC;;AAySvC,eAAepB,cAAf","sourcesContent":["import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport './Profile.css';\nimport PROFILE_SERVICE from '../../services/ProfileServices';\nimport * as PATHS from '../../utils/paths.js';\nimport CountryFlag from '../CountryFlag/CountryFlag';\nimport MyLessons from '../MyLessons/MyLessons';\nimport USER_SERVICE from '../../services/UserServices.js';\nimport Modal from '../Modal/Modal';\n\nclass StudentProfile extends Component {\n  state = {\n    firstName: '',\n    lastName: '',\n    profilePic: '',\n    countryOfOrigin: '',\n    teachingExperience: '',\n    timeRangeOfAvailability: '',\n    coursesTaught: '',\n    isEditProfileClicked: false,\n    isEditDetailsClicked: false,\n    isShowMyBookingsClicked: false,\n    prevCourseName: '',\n    show: false,\n  };\n\n  showModal = (e) => {\n    this.setState({\n      show: !this.state.show,\n    });\n  };\n\n  componentDidMount() {\n    console.log('from the props in cdid mount', this.props.user._id);\n    this.setState(\n      {\n        user: this.props.user,\n      },\n      () => {\n        console.log('from state', this.state);\n        this.getUser();\n      }\n    );\n  }\n\n  getUser = () => {\n    USER_SERVICE.getSpecificStudent(this.state.user._id).then((res) => {\n      this.setState({\n        firstName: res.user.firstName,\n        lastName: res.user.lastName,\n        countryOfOrigin: res.user.countryOfOrigin,\n        profilePic: res.user.profilePic,\n        aboutMe: res.user.aboutMe,\n      });\n    });\n  };\n\n  handleDeleteButton = () => {\n    USER_SERVICE.deleteStudent(this.state.user._id).then((responseFromApi) => {\n      console.log('Student after deletion', responseFromApi);\n      this.props.history.push(PATHS.HOMEPAGE);\n    });\n    this.props.handleLogout();\n  };\n\n  getUserWithUpdatedProfilePicture = (event) => {\n    const file = event.target.files[0];\n    const uploadData = new FormData();\n    uploadData.append('profilePic', file);\n    PROFILE_SERVICE.handleUpload(uploadData, this.state.user._id).then(\n      (responseFromApi) => {\n        this.setState(\n          {\n            profilePic: responseFromApi.user,\n          },\n          () => {\n            this.getUser();\n          }\n        );\n      }\n    );\n  };\n\n  handleRange = (event) => {\n    const { name, value } = event.target;\n    this.setState({ [name]: value });\n  };\n\n  handleEditButton = () => {\n    this.setState({ isEditDetailsClicked: !this.state.isEditDetailsClicked });\n  };\n\n  handleShowBookingsButton = () => {\n    this.setState({\n      isShowMyBookingsClicked: !this.state.isShowMyBookingsClicked,\n    });\n  };\n\n  handleEditProfileButton = () => {\n    this.setState({ isEditProfileClicked: !this.state.isEditProfileClicked });\n    if (this.state.isEditProfileClicked) {\n      this.handleCancelOfUpdate();\n    }\n  };\n\n  handleFormInput = (event) => {\n    const { name, value } = event.target;\n    this.setState({ [name]: value });\n  };\n\n  handleSavingChanges = (event) => {\n    event.preventDefault();\n    PROFILE_SERVICE.handleUpdateStudentDetails(this.state).then(() => {\n      this.setState(\n        {\n          isEditDetailsClicked: false,\n        },\n        () => {\n          this.getUser();\n        }\n      );\n    });\n  };\n\n  handleCancelOfUpdate = () => {\n    this.setState(\n      {\n        isEditDetailsClicked: false,\n      },\n      () => this.getUser()\n    );\n  };\n\n  render() {\n    return (\n      <>\n        <div>\n          <div className='profileContainer'>\n            <div className='imageSection'>\n              {this.state.profilePic && (\n                <img\n                  id='profilePicture'\n                  src={this.state.profilePic}\n                  alt='profile pic'\n                />\n              )}\n              {this.state.isEditProfileClicked && (\n                <label id='imageInputLabel'>\n                  Add/Update profile picture\n                  <input\n                    id='imageInput'\n                    type='file'\n                    name='profilePic'\n                    onChange={(event) =>\n                      this.getUserWithUpdatedProfilePicture(event)\n                    }\n                    ref={(ref) => (this.fileInput = ref)}\n                  />\n                </label>\n              )}\n            </div>\n            <div className='userDetailsSection'>\n              <div className='controlButtonsUserDetails'>\n                {this.state.isEditDetailsClicked ? (\n                  <>\n                    <form\n                      onSubmit={(event) => this.handleSavingChanges(event)}\n                      autoComplete='off'\n                    >\n                      <div>\n                        <label>First name</label>\n                        <input\n                          autoFocus\n                          name='firstName'\n                          id='firstName'\n                          value={this.state.firstName}\n                          onChange={this.handleFormInput}\n                        />\n                        {!this.state.firstName && (\n                          <span className='requiredField'>\n                            This field is required\n                          </span>\n                        )}\n                      </div>\n                      <div>\n                        <label>Last name</label>\n                        <input\n                          name='lastName'\n                          id='lastName'\n                          value={this.state.lastName}\n                          onChange={this.handleFormInput}\n                        />\n                        {!this.state.lastName && (\n                          <span className='requiredField'>\n                            This field is required\n                          </span>\n                        )}\n                      </div>\n                      <div>\n                        <label>Country</label>\n                        <input\n                          name='countryOfOrigin'\n                          id='country'\n                          value={this.state.countryOfOrigin}\n                          onChange={this.handleFormInput}\n                        />\n                        {!this.state.countryOfOrigin && (\n                          <span className='requiredField'>\n                            This field is required\n                          </span>\n                        )}\n                      </div>\n                      <div>\n                        <label>About myself (max 1000 characters)</label>\n                        <textarea\n                          maxLength='1000'\n                          name='aboutMe'\n                          id='description'\n                          value={this.state.aboutMe}\n                          onChange={this.handleFormInput}\n                        />\n                      </div>\n                      <button\n                        disabled={this.state.error}\n                        className='formControlButtons'\n                      >\n                        Save\n                      </button>\n                    </form>\n                    <button\n                      id='cancelChangesButton'\n                      onClick={this.handleCancelOfUpdate}\n                      className='formControlButtons'\n                    >\n                      Cancel\n                    </button>\n                  </>\n                ) : (\n                  <div className='plainUserDetails'>\n                    <div>\n                      <h3>\n                        {this.state.firstName} {this.state.lastName}{' '}\n                        <CountryFlag\n                          countryOfOrigin={this.state.countryOfOrigin}\n                        />\n                      </h3>\n                    </div>\n                    <div>\n                      <p>{this.state.aboutMe}</p>\n                    </div>\n                  </div>\n                )}\n                {this.state.isEditProfileClicked &&\n                  !this.state.isEditDetailsClicked && (\n                    <>\n                      <button\n                        id='editMyDetailsButton'\n                        onClick={this.handleEditButton}\n                      >\n                        Edit my details\n                      </button>\n                      <button id='deleteProfileButton' onClick={this.showModal}>\n                        Delete profile\n                      </button>\n                      <Modal\n                        onClose={this.showModal}\n                        show={this.state.show}\n                        onConfirm={this.handleDeleteButton}\n                      >\n                        Are you sure you want to delete your profile?\n                      </Modal>\n                    </>\n                  )}\n              </div>\n            </div>\n            <button\n              style={{\n                backgroundColor: this.state.isEditProfileClicked && '#F47174',\n                color: this.state.isEditProfileClicked && '#fff',\n              }}\n              id='editMyProfileButton'\n              onClick={this.handleEditProfileButton}\n            >\n              {this.state.isEditProfileClicked\n                ? 'Hide control buttons'\n                : 'Edit my profile'}\n            </button>\n          </div>\n          <div id='myClassesSection'>\n            <button\n              id='showMyBookingsButton'\n              onClick={this.handleShowBookingsButton}\n            >\n              {this.state.isShowMyBookingsClicked\n                ? 'Hide my bookings'\n                : 'Show my bookings'}\n            </button>\n            {this.state.user?._id && this.state.isShowMyBookingsClicked && (\n              <MyLessons studentId={this.state.user._id} />\n            )}\n          </div>\n        </div>\n      </>\n    );\n  }\n}\n\nexport default StudentProfile;\n"]},"metadata":{},"sourceType":"module"}