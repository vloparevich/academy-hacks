{"ast":null,"code":"var _jsxFileName = \"/Users/fernandosalcedo/Desktop/Ironhack/academy-hacks/prog-lang-tutor-client/src/App.js\";\nimport React from 'react';\nimport { Switch } from 'react-router-dom';\nimport LoadingComponent from './components/Loading';\nimport Navbar from './components/Navbar/Navbar';\nimport Login from './components/Auth/Login';\nimport Signup from './components/Auth/Signup';\nimport Home from './components/Home/Home';\nimport NormalRoute from './routing-components/NormalRoute';\nimport ProtectedRoute from './routing-components/ProtectedRoute';\nimport { getLoggedIn, logout } from './services/auth';\nimport * as PATHS from './utils/paths';\nimport './App.css';\nimport TutorProfile from './components/Profile/TutorProfile';\nimport StudentProfile from './components/Profile/StudentProfile';\nimport TutorDetails from './components/TutorDetails/TutorDetails';\nimport * as USER_HELPERS from './utils/userToken';\nimport ReviewTutor from './components/ReviewTutor/ReviewTutor';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass App extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      user: null,\n      isLoading: true\n    };\n\n    this.componentDidMount = () => {\n      const accessToken = USER_HELPERS.getUserToken();\n\n      if (!accessToken) {\n        return this.setState({\n          isLoading: false\n        });\n      }\n\n      getLoggedIn(accessToken).then(res => {\n        if (!res.status) {\n          // deal with failed backend call\n          return this.setState({\n            isLoading: false\n          });\n        }\n\n        this.setState({\n          user: res.data.user,\n          isLoading: false\n        });\n      });\n    };\n\n    this.handleLogout = () => {\n      const accessToken = USER_HELPERS.getUserToken();\n      console.log('hit logout', accessToken);\n\n      if (!accessToken) {\n        return this.setState({\n          user: null,\n          isLoading: false\n        });\n      }\n\n      this.setState({\n        isLoading: true\n      }, () => {\n        logout(accessToken).then(res => {\n          if (!res.status) {\n            // deal with error here\n            console.error('ðŸ’¡ SOMETHING HAPPENED THAT HAS TO DEALT WITH', res);\n          }\n\n          USER_HELPERS.removeUserToken();\n          return this.setState({\n            isLoading: false,\n            user: null\n          });\n        });\n      });\n    };\n\n    this.authenticate = user => {\n      this.setState({\n        user\n      }, () => console.log('User', this.state.user));\n    };\n  }\n\n  render() {\n    var _this$state$user;\n\n    if (this.state.isLoading) {\n      return /*#__PURE__*/_jsxDEV(LoadingComponent, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 14\n      }, this);\n    }\n\n    console.log('in main app.js component', this.state.user);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [/*#__PURE__*/_jsxDEV(Navbar, {\n        handleLogout: this.handleLogout,\n        user: this.state.user\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Switch, {\n        children: [/*#__PURE__*/_jsxDEV(NormalRoute, {\n          exact: true,\n          path: PATHS.HOMEPAGE,\n          component: Home\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(NormalRoute, {\n          exact: true,\n          path: PATHS.SIGNUPPAGE,\n          authenticate: this.authenticate,\n          component: Signup\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(NormalRoute, {\n          exact: true,\n          path: PATHS.LOGINPAGE,\n          authenticate: this.authenticate,\n          component: Login\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(NormalRoute, {\n          exact: true,\n          path: PATHS.TUTOR_DETAILS,\n          authenticate: this.authenticate,\n          component: TutorDetails\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n          exact: true,\n          path: PATHS.USER_DETAILS,\n          component: ((_this$state$user = this.state.user) === null || _this$state$user === void 0 ? void 0 : _this$state$user.isTutor) ? TutorProfile : StudentProfile,\n          user: this.state.user\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/fernandosalcedo/Desktop/Ironhack/academy-hacks/prog-lang-tutor-client/src/App.js"],"names":["React","Switch","LoadingComponent","Navbar","Login","Signup","Home","NormalRoute","ProtectedRoute","getLoggedIn","logout","PATHS","TutorProfile","StudentProfile","TutorDetails","USER_HELPERS","ReviewTutor","App","Component","state","user","isLoading","componentDidMount","accessToken","getUserToken","setState","then","res","status","data","handleLogout","console","log","error","removeUserToken","authenticate","render","HOMEPAGE","SIGNUPPAGE","LOGINPAGE","TUTOR_DETAILS","USER_DETAILS","isTutor"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Switch } from 'react-router-dom';\nimport LoadingComponent from './components/Loading';\nimport Navbar from './components/Navbar/Navbar';\nimport Login from './components/Auth/Login';\nimport Signup from './components/Auth/Signup';\nimport Home from './components/Home/Home';\nimport NormalRoute from './routing-components/NormalRoute';\nimport ProtectedRoute from './routing-components/ProtectedRoute';\nimport { getLoggedIn, logout } from './services/auth';\nimport * as PATHS from './utils/paths';\nimport './App.css';\nimport TutorProfile from './components/Profile/TutorProfile';\nimport StudentProfile from './components/Profile/StudentProfile';\nimport TutorDetails from './components/TutorDetails/TutorDetails';\nimport * as USER_HELPERS from './utils/userToken';\nimport ReviewTutor from './components/ReviewTutor/ReviewTutor';\n\nclass App extends React.Component {\n  state = {\n    user: null,\n    isLoading: true,\n  };\n\n  componentDidMount = () => {\n    const accessToken = USER_HELPERS.getUserToken();\n    if (!accessToken) {\n      return this.setState({\n        isLoading: false,\n      });\n    }\n    getLoggedIn(accessToken).then((res) => {\n      if (!res.status) {\n        // deal with failed backend call\n        return this.setState({\n          isLoading: false,\n        });\n      }\n      this.setState({\n        user: res.data.user,\n        isLoading: false,\n      });\n    });\n  };\n\n  handleLogout = () => {\n    const accessToken = USER_HELPERS.getUserToken();\n    console.log('hit logout', accessToken);\n    if (!accessToken) {\n      return this.setState({\n        user: null,\n        isLoading: false,\n      });\n    }\n    this.setState(\n      {\n        isLoading: true,\n      },\n      () => {\n        logout(accessToken).then((res) => {\n          if (!res.status) {\n            // deal with error here\n            console.error('ðŸ’¡ SOMETHING HAPPENED THAT HAS TO DEALT WITH', res);\n          }\n          USER_HELPERS.removeUserToken();\n          return this.setState({\n            isLoading: false,\n            user: null,\n          });\n        });\n      }\n    );\n  };\n\n  authenticate = (user) => {\n    this.setState(\n      {\n        user,\n      },\n      () => console.log('User', this.state.user)\n    );\n  };\n\n  render() {\n    if (this.state.isLoading) {\n      return <LoadingComponent />;\n    }\n\n    console.log('in main app.js component', this.state.user);\n\n    return (\n      <div className='App'>\n        <Navbar handleLogout={this.handleLogout} user={this.state.user} />\n        <Switch>\n          <NormalRoute exact path={PATHS.HOMEPAGE} component={Home} />\n          <NormalRoute\n            exact\n            path={PATHS.SIGNUPPAGE}\n            authenticate={this.authenticate}\n            component={Signup}\n          />\n          <NormalRoute\n            exact\n            path={PATHS.LOGINPAGE}\n            authenticate={this.authenticate}\n            component={Login}\n          />\n          <NormalRoute\n            exact\n            path={PATHS.TUTOR_DETAILS}\n            authenticate={this.authenticate}\n            component={TutorDetails}\n          />\n          <ProtectedRoute\n            exact\n            path={PATHS.USER_DETAILS}\n            component={this.state.user?.isTutor ? TutorProfile : StudentProfile}\n            user={this.state.user}\n          />\n        </Switch>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}