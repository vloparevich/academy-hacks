{"ast":null,"code":"var _jsxFileName = \"/Users/fernandosalcedo/Desktop/Ironhack/academy-hacks/prog-lang-tutor-client/src/components/MyLessons/MyLessons.jsx\";\nimport axios from 'axios';\nimport React, { Component } from 'react';\nimport './MyLessons.css';\nimport STUDENT_LESSON_SERVICE from '../../services/StudentLessonServices';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default class MyLessons extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {};\n\n    this.componentDidMount = () => {\n      this.getStudentWithLessons();\n    };\n\n    this.getStudentWithLessons = () => {\n      var _this$props$match;\n\n      const studentId = ((_this$props$match = this.props.match) === null || _this$props$match === void 0 ? void 0 : _this$props$match.params.id) ? this.props.match.params.id : this.props.studentId;\n      STUDENT_LESSON_SERVICE.getStudentAndLessons(studentId).then(responseFromApi => {\n        this.setState({\n          userAndTutorDetails: responseFromApi.data.studentWithBookings\n        }, () => {\n          console.log('state', this.state);\n        });\n      }).catch(err => console.log({\n        err: err\n      }));\n    };\n\n    this.getMyBookings = () => {\n      var _this$state$userAndTu;\n\n      let data = [];\n      console.log('long', this.state.userAndTutorDetails);\n      const details = (_this$state$userAndTu = this.state.userAndTutorDetails) === null || _this$state$userAndTu === void 0 ? void 0 : _this$state$userAndTu.myBookings;\n      details === null || details === void 0 ? void 0 : details.forEach(el => {\n        var _el$tutorId, _el$tutorId2, _el$tutorId3, _el$tutorId4, _el$tutorId5;\n\n        data.push({\n          date: el.date,\n          pickedSlots: el.pickedSlots.sort((a, b) => a - b),\n          tutorFullName: `${(_el$tutorId = el.tutorId) === null || _el$tutorId === void 0 ? void 0 : _el$tutorId.firstName} ${(_el$tutorId2 = el.tutorId) === null || _el$tutorId2 === void 0 ? void 0 : _el$tutorId2.lastName}`,\n          studentBookingId: el._id,\n          tutorId: (_el$tutorId3 = el.tutorId) === null || _el$tutorId3 === void 0 ? void 0 : _el$tutorId3._id,\n          courseName: (_el$tutorId4 = el.tutorId) === null || _el$tutorId4 === void 0 ? void 0 : _el$tutorId4.coursesTaught.courses[0].courseName,\n          profilePic: (_el$tutorId5 = el.tutorId) === null || _el$tutorId5 === void 0 ? void 0 : _el$tutorId5.profilePic\n        });\n      });\n      const sortedByDate = [...data].sort((a, b) => a.date > b.date ? 1 : -1);\n      return sortedByDate;\n    };\n\n    this.handleLessonDeletion = (studentBookingId, date, scheduledHour, studentId, tutorId) => {\n      STUDENT_LESSON_SERVICE.cancelStudentBooking(studentBookingId, date, scheduledHour, studentId, tutorId).then(response => {\n        this.getStudentWithLessons();\n      });\n    };\n  }\n\n  render() {\n    var _this$getMyBookings;\n\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: this.getMyBookings().length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"myLessonsCmp\",\n        children: (_this$getMyBookings = this.getMyBookings()) === null || _this$getMyBookings === void 0 ? void 0 : _this$getMyBookings.map(el => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"myLessonCard\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: el.date\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            src: el.profilePic,\n            alt: \"profile pic\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            id: \"myLessonCourseName\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              id: \"myLessonSubjectName\",\n              children: el.courseName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            id: \"myLessonTutorName\",\n            children: el.tutorFullName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            children: el.pickedSlots.map((scheduledHour, i) => /*#__PURE__*/_jsxDEV(\"li\", {\n              children: [scheduledHour, \":00\", ' ', /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"myLesson_cancel_btn\",\n                onClick: () => this.handleLessonDeletion(el.studentBookingId, el.date, scheduledHour, this.state.userAndTutorDetails._id, el.tutorId),\n                children: \"Cancel\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 84,\n                columnNumber: 23\n              }, this)]\n            }, i, true, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 17\n          }, this)]\n        }, el.studentBookingId, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }, this)\n    }, void 0, false);\n  }\n\n}","map":{"version":3,"sources":["/Users/fernandosalcedo/Desktop/Ironhack/academy-hacks/prog-lang-tutor-client/src/components/MyLessons/MyLessons.jsx"],"names":["axios","React","Component","STUDENT_LESSON_SERVICE","MyLessons","state","componentDidMount","getStudentWithLessons","studentId","props","match","params","id","getStudentAndLessons","then","responseFromApi","setState","userAndTutorDetails","data","studentWithBookings","console","log","catch","err","getMyBookings","details","myBookings","forEach","el","push","date","pickedSlots","sort","a","b","tutorFullName","tutorId","firstName","lastName","studentBookingId","_id","courseName","coursesTaught","courses","profilePic","sortedByDate","handleLessonDeletion","scheduledHour","cancelStudentBooking","response","render","length","map","i"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport React, { Component } from 'react';\nimport './MyLessons.css';\nimport STUDENT_LESSON_SERVICE from '../../services/StudentLessonServices';\n\nexport default class MyLessons extends Component {\n  state = {};\n\n  componentDidMount = () => {\n    this.getStudentWithLessons();\n  };\n\n  getStudentWithLessons = () => {\n    const studentId = this.props.match?.params.id\n      ? this.props.match.params.id\n      : this.props.studentId;\n    STUDENT_LESSON_SERVICE.getStudentAndLessons(studentId)\n      .then((responseFromApi) => {\n        this.setState(\n          { userAndTutorDetails: responseFromApi.data.studentWithBookings },\n          () => {\n            console.log('state', this.state);\n          }\n        );\n      })\n      .catch((err) => console.log({ err: err }));\n  };\n\n  getMyBookings = () => {\n    let data = [];\n    console.log('long', this.state.userAndTutorDetails);\n    const details = this.state.userAndTutorDetails?.myBookings;\n\n    details?.forEach((el) => {\n      data.push({\n        date: el.date,\n        pickedSlots: el.pickedSlots.sort((a, b) => a - b),\n        tutorFullName: `${el.tutorId?.firstName} ${el.tutorId?.lastName}`,\n        studentBookingId: el._id,\n        tutorId: el.tutorId?._id,\n        courseName: el.tutorId?.coursesTaught.courses[0].courseName,\n        profilePic: el.tutorId?.profilePic,\n      });\n    });\n    const sortedByDate = [...data].sort((a, b) => (a.date > b.date ? 1 : -1));\n    return sortedByDate;\n  };\n\n  handleLessonDeletion = (\n    studentBookingId,\n    date,\n    scheduledHour,\n    studentId,\n    tutorId\n  ) => {\n    STUDENT_LESSON_SERVICE.cancelStudentBooking(\n      studentBookingId,\n      date,\n      scheduledHour,\n      studentId,\n      tutorId\n    ).then((response) => {\n      this.getStudentWithLessons();\n    });\n  };\n\n  render() {\n    return (\n      <>\n        {this.getMyBookings().length > 0 && (\n          <div id='myLessonsCmp'>\n            {this.getMyBookings()?.map((el) => (\n              <div className='myLessonCard' key={el.studentBookingId}>\n                <p>{el.date}</p>\n                <img src={el.profilePic} alt='profile pic' />\n                <p id='myLessonCourseName'>\n                  <span id='myLessonSubjectName'>{el.courseName}</span>\n                </p>\n                <p id='myLessonTutorName'>{el.tutorFullName}</p>\n                <ul>\n                  {el.pickedSlots.map((scheduledHour, i) => (\n                    <li key={i}>\n                      {scheduledHour}:00{' '}\n                      <button\n                        className='myLesson_cancel_btn'\n                        onClick={() =>\n                          this.handleLessonDeletion(\n                            el.studentBookingId,\n                            el.date,\n                            scheduledHour,\n                            this.state.userAndTutorDetails._id,\n                            el.tutorId\n                          )\n                        }\n                      >\n                        Cancel\n                      </button>\n                    </li>\n                  ))}\n                </ul>\n              </div>\n            ))}\n          </div>\n        )}\n      </>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}